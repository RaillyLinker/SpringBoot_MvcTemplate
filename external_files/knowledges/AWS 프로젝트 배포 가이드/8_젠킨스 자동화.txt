[젠킨스 자동화]
- 앞서 서비스 서버 배포까지 완료하였습니다.
    그런데, 수정사항이 있을 때마다 처리하기에는 번거로운 프로세스입니다.
    이번에는 젠킨스를 사용하여, Git 에 Push 를 올릴 때마다 자동으로 빌드 및 배포가 이루어지도록 할 것입니다.

- AWS EC2 에 배포하기
    1. 앞서 가이드 6번 글에서 모니터링 서비스를 준비하며 developer-tools 서버를 만들었으니,
        해당 서버에서 포트 번호만 8082 로 다르게 실행시키겠습니다.

    2. SSH 로 서버에 접속후,
        >> sudo docker run -itd --name jenkins_container -p 8082:8080 -v ~/Desktop/jenkins_home:/var/jenkins_home -u root jenkins/jenkins:lts
        이것을 입력하기만 하면 설치 끝입니다.

        서버 보안 관리의 인바운드 설정에서 8082 포트에 접속 가능하게 열어주고,
        해당 포트로 접속하여 젠킨스가 실행되는지 확인하세요.

    3. 접속이 잘 되는 것을 확인하였다면,
        젠킨스 화면에
        please copy the password from either location and paste it below
        라고, 비밀번호를 입력하라고 하는데,
        이 비밀번호는,
        앞서 -v 옵션으로 만들어진 ~/Desktop 폴더 안에 있는데,
        >> sudo cat ~/Desktop/jenkins_home/secrets/initialAdminPassword
        위 명령어로 조회를 하면 비밀번호가 나오니 이것을 입력하면 됩니다.

        다음으로 나오는 화면에서 Install suggested plugins 를 눌러 기본 플러그인을 설치하고,
        접속시 사용할 아이디와 비밀번호를 입력하면 초기 세팅이 끝납니다.

    4. 여기까지 하여, 정보를 문서화하겠습니다.
        동일한 서버를 사용하므로, 가이드 6번글에서 작성했던,
        "AWS EC2 developer-tools.txt" 파일을 열고,


        [developer-tools]
        - 이 EC2 서버는 개발자 툴을 위한 서버입니다.

        키페어 파일 : developer.pem
        OS : Ubuntu Server 24.04 LTS (HVM) - (t2.small)
        접속 ip :
        OpenSSH 접속 명령어 : ssh -i "developer.pem" ubuntu@

        (Spring Admin)
        포트 : 8081
        Admin id :
        Admin pw :

        (Jenkins)
        포트 : 8082
        admin pw :
        user id :
        user pw :


        위와 같은 형식으로 Jenkins 정보를 추가하면 됩니다.

    5. 이제 준비된 젠킨스로 자동화 로직을 구현할 것입니다.
        기능 설계부터 하겠습니다.

        1. 로컬에서 프로젝트를 수정하다가, Git 레포지토리의 dev 브랜치에 push 를 올립니다.
        2. 이를 신호로 하여 젠킨스가 해당 git 레포지토리의 dev 브랜치에서 프로젝트를 pull 해 옵니다.
        3. 프로젝트의 external_files 의 개발 서버 빌드 방법의 순서에 따라 테스트를 진행합니다.
        4. 이상이 없다면 생성된 server_dev.tar 파일을 배포할 서버로 전달합니다.
        5. 해당 서버의 ssh 에 접속하여 도커 명령어로 기존의 server_dev 컨테이너를 내리고 기존 이미지도 제거합니다.
        6. 도커 명령어로, 앞서 받은 server_dev.tar 이미지 파일을 로딩한 후 실행시킵니다.
        7. 도커 컨테이너 실행시의 모니터링 기능을 추가하여 안정성을 높이는 것도 좋습니다.

        위와 같은 작업을 수행하도록 하는 것이 목표입니다.